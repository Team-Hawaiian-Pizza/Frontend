/* 팔레트 브릿지 (전역 변수는 유지하되, 컴포넌트는 mp- 네임스페이스로 제한) */
:root{
  --mp-border: var(--c-outline, #D1D5DB);
  --mp-text:   var(--c-text,    #0F172A);
  --mp-muted:  var(--c-muted,   #6B7280);
  --mp-bg:     #ffffff;
  --mp-soft:   var(--c-bg,      #F9FAFB);
  --mp-primary: var(--c-primary,        #3B82F6);
  --mp-primary-hover: var(--c-primary-hover, #60A5FA);
  --mp-accent: var(--c-accent,          #1D4ED8);
  --mp-radius: 16px;
  --mp-shadow-sm: 0 2px 8px rgba(0,0,0,.04);
  --mp-shadow-md: 0 10px 24px color-mix(in oklab, var(--mp-primary) 22%, transparent);

  /* 친구목록 높이 */
  --mp-friends-height: 300px;
}

/* Page */
.mp-main{ display:flex; justify-content:center; padding:24px 16px 60px; background:var(--mp-soft); color:var(--mp-text); }
.mp-card{
  width:100%; max-width:960px; background:var(--mp-bg);
  border:1px solid var(--mp-border); border-radius:16px; box-shadow:var(--mp-shadow-sm); padding:24px;
}

/* ===== 상단: 좌 명함 / 우 매너온도+친구 ===== */
.mp-card .mp-profile-stack{
  display:grid;
  grid-template-columns: 420px 1fr;
  gap:24px;
  align-items:start;
  border-bottom:1px solid var(--mp-border);
  padding-bottom:20px; margin-bottom:20px;
}

/* 좌측 */
.mp-card .mp-left-col{ display:flex; flex-direction:column; gap:12px; }
.mp-card .card-wrap{ max-width:420px; }

/* 버튼들 */
.mp-card .mp-profile-actions{ display:flex; justify-content:center; width:100%; }
.mp-card .mp-btn{
  height:36px; padding:0 16px; font-size:14px; border-radius:12px;
  border:1px solid var(--mp-border); background:#fff; cursor:pointer;
  transition:border-color .15s ease, background .15s ease, box-shadow .15s ease, transform .06s ease, color .15s ease;
}
.mp-card .mp-btn:active{ transform:translateY(.5px); }
.mp-card .mp-btn-primary{ border-color:var(--mp-primary); background:var(--mp-primary); color:#fff; font-weight:800; }
.mp-card .mp-btn-primary:hover{ background:var(--mp-primary-hover); border-color:var(--mp-primary-hover); box-shadow:var(--mp-shadow-md); }
.mp-card .mp-btn-ghost{ background:color-mix(in oklab, var(--mp-primary) 8%, #fff); border-color:var(--mp-primary); color:var(--mp-primary); }
.mp-card .mp-btn-ghost:hover{ background:color-mix(in oklab, var(--mp-primary) 14%, #fff); }
.mp-card .mp-btn-light{ background:#fff; border-color:var(--mp-border); }
.mp-card .mp-btn-light:hover{ border-color:var(--mp-primary-hover); }

/* 우측 컬럼 */
.mp-card .mp-right-col { display:flex; flex-direction:column; gap:16px; }

/* 매너온도 */
.mp-card .mp-thermo-wrap{ display:flex; flex-direction:column; gap:8px; width:100%; max-width:520px; }
.mp-card .mp-thermo-label{ font-size:14px; color:var(--mp-text); }
.mp-card .mp-thermo{
  height:14px; border-radius:999px; background:#e5e7eb; position:relative; overflow:hidden; border:1px solid #e5e7eb;
}
.mp-card .mp-thermo-fill{
  position:absolute; left:0; top:0; bottom:0; width:0%;
  background: linear-gradient(90deg, var(--mp-primary-hover), var(--mp-accent));
  border-right:1px solid rgba(0,0,0,0.06);
  transition: width .3s ease;
}
.mp-card .mp-thermo-scale{ display:flex; justify-content:space-between; color:var(--mp-muted); font-size:12px; margin-top:2px; }

/* 친구목록 */
.mp-card .mp-friends{
  display:flex; flex-direction:column; gap:10px;
  max-height: var(--mp-friends-height);
  overflow-y: auto;
  padding-right: 6px;
  scrollbar-gutter: stable both-edges;
}
.mp-card .mp-friends-header{
  font-weight:800; color:var(--mp-text);
  padding:0 2px; margin-top:4px;
}
/* 스크롤바 */
.mp-card .mp-friends{ scrollbar-width: thin; scrollbar-color: #c7d2fe #f3f4f6; }
.mp-card .mp-friends::-webkit-scrollbar{ width: 8px; }
.mp-card .mp-friends::-webkit-scrollbar-track{ background:#F3F4F6; border-radius: 8px; }
.mp-card .mp-friends::-webkit-scrollbar-thumb{
  background: #c7d2fe; border-radius: 8px; border: 2px solid #F3F4F6;
}
.mp-card .mp-friends::-webkit-scrollbar-thumb:hover{ background:#a5b4fc; }

.mp-card .mp-friend-row{
  display:flex; align-items:center; gap:12px; padding:10px 12px;
  border:1px solid var(--mp-border); border-radius:10px; background:#fff; cursor:pointer;
  transition: background .15s ease, box-shadow .15s ease;
}
.mp-card .mp-friend-row:hover{ background:#F3F4F6; box-shadow:0 1px 0 rgba(0,0,0,.02); }
.mp-card .mp-friend-avatar{ width:44px; height:44px; border-radius:50%; overflow:hidden; flex-shrink:0; }
.mp-card .mp-friend-avatar img{ width:100%; height:100%; object-fit:cover; }
.mp-card .mp-friend-ph{ width:100%; height:100%; background:#d1d5db; border-radius:50%; }
.mp-card .mp-friend-meta{ flex:1; text-align:left; }
.mp-card .mp-friend-name{ font-weight:700; font-size:14px; color:#111827; }
.mp-card .mp-friend-msg{ font-size:12px; color:#6b7280; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }

/* 도장판 */
.mp-card .mp-stamps{ padding-top:20px; }
.mp-card .mp-sec-header{ display:flex; align-items:center; justify-content:space-between; margin-bottom:14px; }
.mp-card .mp-sec-title{ margin:0; font-size:16px; font-weight:700; color:var(--mp-text); }
.mp-card .mp-stamp-grid{ display:grid; grid-template-columns:repeat(4, minmax(0,1fr)); gap:14px; }
.mp-card .mp-stamp-card{
  background:#fff; border:1px solid var(--mp-border); border-radius:12px; padding:12px;
  display:flex; flex-direction:column; gap:10px; align-items:stretch;
  transition:border-color .15s ease, box-shadow .15s ease, transform .06s ease;
}
.mp-card .mp-stamp-card:hover{ border-color:var(--mp-primary-hover); box-shadow:0 8px 18px color-mix(in oklab, var(--mp-primary) 18%, transparent); transform:translateY(-1px); }
.mp-card .mp-stamp-thumb{ height:96px; background:linear-gradient(135deg,#f3f4f6,#e5e7eb); border-radius:10px; border:1px dashed var(--mp-border); }
.mp-card .mp-stamp-title{ font-size:14px; color:var(--mp-text); }

/* Responsive */
@media (max-width: 860px){
  .mp-card .mp-profile-stack{ grid-template-columns: 1fr; gap:16px; }
  .mp-card .card-wrap{ max-width:100%; }
  :root{ --mp-friends-height: 260px; }
}
@media (max-width: 520px){
  .mp-card .mp-stamp-grid{ grid-template-columns: 1fr; }
}

/* 1) 그리드 두 번째 칼럼이 넘치지 않도록 */
.mp-card .mp-profile-stack{
  grid-template-columns: 420px minmax(0, 1fr); /* ← 1fr 대신 minmax(0,1fr) */
}

/* 2) 오른쪽 컬럼이 수축 가능하도록 + 가로 넘침 방지 */
.mp-card .mp-right-col{
  min-width: 0;          /* ← 중요: flex/grid 자식 수축 허용 */
  overflow-x: hidden;    /* 가로 스크롤/삐져나옴 차단 */
  gap: 16px;
}

/* 3) 매너온도 래퍼가 그리드 폭을 밀지 않도록 */
.mp-card .mp-thermo-wrap{
  max-width: 100%;       /* ← 520px 제한 제거 */
}

/* 4) 친구 컨테이너 고정폭/가로넘침 방지 */
.mp-card .mp-friends{
  max-width: 100%;
  overflow-x: hidden;    /* 세로만 스크롤 */
}

/* 5) 친구 아이템, 텍스트 영역 수축/줄임표 정상화 */
.mp-card .mp-friend-row{ width: 100%; }
.mp-card .mp-friend-meta{ min-width: 0; } /* ← 텍스트가 옆으로 밀지 않게 */
.mp-card .mp-friend-name{ white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.mp-card .mp-friend-msg{ white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

/* 6) 모바일 그리드 안전장치 (이미 있으면 유지, 없으면 추가) */
@media (max-width: 860px){
  .mp-card .mp-profile-stack{ grid-template-columns: 1fr; }
}
